# 인증 코드 전송 실패 해결 가이드

## 문제 상황
Pixel 6에서 `010-1111-2222` 입력 후 "인증 코드 전송" 버튼 클릭 시 실패

## 확인 사항

### 1. Firebase Console 테스트 전화번호 확인

#### 필수 확인:
1. [Firebase Console](https://console.firebase.google.com/) 접속
2. 프로젝트 선택
3. **Authentication** → **Sign-in method** → **전화번호** 클릭
4. **테스트 전화번호** 섹션 확인

#### 등록되어 있어야 할 번호:
- **보호자**: `+821011112222` 또는 `+82 10-1111-2222`
  - 인증 코드: `111111`
- **보호 대상자**: `+821033334444` 또는 `+82 10-3333-4444`
  - 인증 코드: `333333`

#### 확인 방법:
- 테스트 전화번호 목록에 위 번호가 있는지 확인
- 각 번호의 인증 코드가 정확히 일치하는지 확인
- 기존 테스트 번호가 있다면 모두 삭제 후 새로 추가

### 2. 전화번호 형식 확인

#### 입력 형식:
- `010-1111-2222` ✅
- `01011112222` ✅
- `+821011112222` ✅

#### 변환 결과:
- 모두 `+821011112222` (E.164 형식)로 변환됨

### 3. 에러 메시지 확인

앱에서 표시되는 에러 메시지를 확인하세요:

#### 일반적인 에러:
- **"invalid-phone-number"**: 전화번호 형식 오류
- **"quota-exceeded"**: 일일 인증 횟수 초과
- **"too-many-requests"**: 너무 많은 요청

#### 해결 방법:
1. 에러 메시지 확인
2. Firebase Console에서 테스트 번호 재등록
3. 앱 재시작 후 다시 시도

## 단계별 해결 방법

### Step 1: Firebase Console 확인
1. Firebase Console 접속
2. Authentication → Sign-in method → 전화번호
3. 테스트 전화번호 섹션 확인
4. `+821011112222` / `111111` 등록 확인

### Step 2: 테스트 번호 재등록
1. 기존 테스트 번호 모두 삭제
2. 새로 추가:
   - `+821011112222` / `111111`
   - `+821033334444` / `333333`
3. 저장

### Step 3: 앱 재시작
1. 앱 완전 종료
2. 에뮬레이터에서 앱 재실행
3. 다시 시도

### Step 4: 디버그 로그 확인
터미널 또는 디버그 콘솔에서 다음 메시지 확인:
- `인증 코드 전송 시도: +821011112222`
- `인증 실패 - 코드: ...`
- 또는 `인증 코드 전송 성공`

## 자주 발생하는 문제

### 문제 1: 테스트 번호 미등록
**증상**: "invalid-phone-number" 또는 "missing-phone-number" 에러
**해결**: Firebase Console에 테스트 번호 등록

### 문제 2: 인증 코드 불일치
**증상**: 코드 입력 후 인증 실패
**해결**: Firebase Console의 인증 코드와 입력한 코드 일치 확인

### 문제 3: 일일 제한 초과
**증상**: "quota-exceeded" 에러
**해결**: 다음 날까지 대기 또는 Firebase Console에서 제한 확인

### 문제 4: Firebase 프로젝트 설정 오류
**증상**: "project-not-found" 또는 연결 오류
**해결**: `google-services.json` 파일 확인, Firebase 프로젝트 연결 확인

## 테스트 체크리스트

- [ ] Firebase Console에 테스트 번호 등록됨
- [ ] 전화번호 형식 올바름 (`010-1111-2222`)
- [ ] 인증 코드 일치 (`111111`)
- [ ] 앱이 최신 버전으로 빌드됨
- [ ] 에뮬레이터가 정상 작동 중
- [ ] 인터넷 연결 정상

## 추가 디버깅

### 디버그 로그 확인:
앱 실행 시 터미널에서 다음 로그 확인:
```
인증 코드 전송 시도: +821011112222
인증 코드 전송 성공: verificationId=...
```
또는
```
인증 실패 - 코드: invalid-phone-number, 메시지: ...
```

### Firebase Console 로그 확인:
1. Firebase Console → 프로젝트 설정
2. 사용량 및 청구 → 로그 확인
3. Authentication 로그 확인
