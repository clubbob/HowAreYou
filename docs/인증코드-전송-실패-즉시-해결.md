# 인증 코드 전송 실패 즉시 해결 방법

## 현재 오류
```
This request is missing a valid app identifier, meaning that Play Integrity checks, 
and reCAPTCHA checks were unsuccessful.
```

## 즉시 확인 사항

### 1단계: Firebase Console에서 테스트 번호 확인 (가장 중요!)

1. [Firebase Console](https://console.firebase.google.com/) 접속
2. 프로젝트 선택: **howareyou-1c5de**
3. **Authentication** → **Sign-in method** → **전화번호** 클릭
4. **테스트 전화번호** 섹션으로 스크롤

#### 확인해야 할 것:
- ✅ `+821011112222` / `111111` (보호자) 등록되어 있는가?
- ✅ `+821033334444` / `333333` (보호 대상자) 등록되어 있는가?

### 2단계: 테스트 번호 재등록 (권장)

테스트 번호가 없거나 잘못 등록된 경우:

1. **기존 테스트 번호 모두 삭제**
2. **새로 추가**:
   - 전화번호: `+821011112222` (또는 `+82 10-1111-2222`)
   - 인증 코드: `111111`
   - **추가** 버튼 클릭
3. **두 번째 번호 추가**:
   - 전화번호: `+821033334444` (또는 `+82 10-3333-4444`)
   - 인증 코드: `333333`
   - **추가** 버튼 클릭
4. **저장** 확인

### 3단계: 앱 재시작

```powershell
# 앱 완전 종료 후 재실행
flutter run -d emulator-5554
```

## 여전히 안 되는 경우

테스트 번호를 사용해도 Play Integrity 오류가 발생할 수 있습니다. 이 경우:

### 해결 방법: SHA-1 지문 등록

테스트 번호만으로는 해결되지 않는 경우, SHA-1 지문을 등록해야 합니다.

#### 빠른 확인 방법 (Android Studio Terminal):

```powershell
cd android
.\gradlew signingReport
```

출력에서 `SHA1:` 라인 찾기

#### Firebase Console에 등록:

1. Firebase Console → 프로젝트 설정
2. 내 앱 → Android 앱 선택
3. SHA 인증서 지문 → 지문 추가
4. SHA-1 지문 입력
5. 저장

## 체크리스트

- [ ] Firebase Console에 테스트 번호가 등록되어 있는가?
- [ ] 전화번호 형식이 `+821011112222`인가?
- [ ] 인증 코드가 정확히 `111111`인가?
- [ ] 앱을 재시작했는가?
- [ ] 여전히 안 되면 SHA-1 지문을 등록했는가?

## 빠른 테스트

### Pixel 1 (보호자)에서:
1. 전화번호: `010-1111-2222` 입력
2. "인증 코드 전송" 클릭
3. 인증 코드: `111111` 입력
4. "인증 확인" 클릭

### Pixel 2 (보호 대상자)에서:
1. 전화번호: `010-3333-4444` 입력
2. "인증 코드 전송" 클릭
3. 인증 코드: `333333` 입력
4. "인증 확인" 클릭

## 참고

- 테스트 전화번호를 사용해도 때로는 SHA-1 지문이 필요할 수 있습니다
- Firebase의 보안 정책에 따라 다를 수 있습니다
- 테스트 번호 재등록 후에도 안 되면 SHA-1 지문 등록이 필요합니다
