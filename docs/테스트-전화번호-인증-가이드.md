# 테스트 전화번호 인증 가이드

## 테스트 전화번호 및 인증 코드

### Pixel 1 (보호자, emulator-5554)
- **전화번호**: `010-1111-2222`
- **E.164 형식**: `+821011112222`
- **인증 코드**: `111111`

### Pixel 2 (보호 대상자, emulator-5556)
- **전화번호**: `010-3333-4444`
- **E.164 형식**: `+821033334444`
- **인증 코드**: `333333`

## Firebase Console 설정 확인

### 1. Firebase Console 접속
1. [Firebase Console](https://console.firebase.google.com/) 접속
2. 프로젝트 선택: **howareyou-1c5de**

### 2. Authentication 설정 확인
1. 왼쪽 메뉴에서 **Authentication** 클릭
2. **Sign-in method** 탭 클릭
3. **전화번호** (Phone) 클릭
4. **사용 설정** 토글이 **켜져 있는지** 확인

### 3. 테스트 전화번호 등록 확인

**테스트 전화번호** 섹션에서 다음이 등록되어 있어야 합니다:

#### 보호자 번호
- **전화번호**: `+821011112222` 또는 `+82 10-1111-2222`
- **인증 코드**: `111111`

#### 보호 대상자 번호
- **전화번호**: `+821033334444` 또는 `+82 10-3333-4444`
- **인증 코드**: `333333`

## 테스트 절차

### Pixel 1 (보호자)에서 테스트
1. Pixel 1 (emulator-5554)에서 앱 실행
2. 전화번호 입력: `010-1111-2222`
3. "인증 코드 전송" 클릭
4. 인증 코드 입력: `111111`
5. "인증 확인" 클릭
6. **보호자 모드** 선택

### Pixel 2 (보호 대상자)에서 테스트
1. Pixel 2 (emulator-5556)에서 앱 실행
2. 전화번호 입력: `010-3333-4444`
3. "인증 코드 전송" 클릭
4. 인증 코드 입력: `333333`
5. "인증 확인" 클릭
6. **보호 대상자 모드** 선택

## 중요 사항

### 테스트 전화번호 사용 시
- ✅ **SHA-1 지문 등록이 필요 없을 수 있습니다**
- ✅ 실제 SMS가 전송되지 않습니다
- ✅ Firebase Console에 설정한 인증 코드를 사용합니다
- ✅ Play Integrity/reCAPTCHA 검사가 완화됩니다

### 테스트 번호가 작동하지 않는 경우
1. Firebase Console에서 테스트 번호가 정확히 등록되었는지 확인
2. 전화번호 형식이 `+821011112222` (E.164)인지 확인
3. 인증 코드가 정확히 일치하는지 확인 (공백 없이)
4. 앱을 완전히 재시작 후 다시 시도

## 문제 해결

### "Play Integrity checks failed" 오류가 여전히 발생하는 경우

테스트 전화번호를 사용해도 이 오류가 발생할 수 있습니다. 이 경우:

1. **Firebase Console에서 테스트 번호 재등록**
   - 기존 테스트 번호 삭제
   - 새로 추가 (전화번호와 인증 코드 정확히 입력)

2. **앱 재시작**
   ```powershell
   flutter clean
   flutter pub get
   flutter run -d emulator-5554
   ```

3. **여전히 안 되면 SHA-1 지문 등록 필요**
   - 테스트 번호만으로는 해결되지 않는 경우
   - `docs/SHA-1-확인-수동-방법.md` 참고

## 참고

- 테스트 전화번호는 개발 중에만 사용합니다
- 프로덕션 배포 시에는 실제 SMS 인증을 사용해야 합니다
- 테스트 번호는 Firebase Console에서 관리됩니다
