# 서비스 점검 및 보완

배포 준비 후, 서비스가 제대로 되는지 확인할 때 보면 좋은 항목입니다.

---

## 1. 꼭 확인할 플로우 (테스트)

| 순서 | 확인 내용 |
|------|-----------|
| 1 | **전화번호 로그인** → 인증 코드 입력 → 홈 진입 |
| 2 | **보호대상자**: 상태 알려주기 → 괜찮아/보통/별로 선택 → 확인 → 이전 화면 복귀 |
| 3 | **보호대상자**: 오늘 이미 응답한 뒤 다시 들어가면 "오늘 이미 상태를 알려주셨습니다" 안내 |
| 4 | **보호대상자**: 보호자 지정 → 전화번호 검색·추가 → 대시보드에 반영 |
| 5 | **보호자**: 보호 대상 목록·오늘 상태·최근 7일 확인 |
| 6 | **알림**: 로컬 알림(08/12/18시) 수신·탭 시 질문 화면 이동 |
| 7 | **FCM**: 보호대상자 응답 시 보호자 기기에서 푸시 수신 (동일 계정/다른 기기 또는 보호자 계정) |

---

## 2. 보완하면 좋은 것

### 2.1 에러 메시지 사용자 친화화 ✅ 완료

- `저장 실패: $e`, `수정 실패: $e` 등 → **"잠시 후 다시 시도해 주세요."** / **"네트워크를 확인해 주세요."** 등으로 변경 완료.
- 적용: `question_screen`, `subject_detail_screen`, `guardian_screen`, `guardian_dashboard_screen`, `auth_screen`

### 2.2 미구현/개선 TODO (선택)

- **no_response_screen**: "알림 보내기 기능은 준비 중입니다"  
  → 나중에: FCM으로 대상자에게 "기분 알려주기" 알림 전송 구현
- **fcm_service**: 알림 탭 시 `/home`으로만 이동  
  → 나중에: 보호자면 대시보드로 바로 이동하도록 개선 가능

### 2.3 네트워크 끊김

- 인터넷 끊김 시 Firestore/Auth 실패에 대한 **공통 처리**나 **재시도/안내**는 아직 없음.
- 필요하면: 저장/수정/삭제 실패 시 "연결을 확인해 주세요" 등 메시지로 통일하는 정도만 해도 좋음.

---

## 3. 요약

- **먼저**: 위 "1. 꼭 확인할 플로우"대로 한 번씩 실행해 보면 서비스 동작 여부를 확인하기 좋습니다.
- **2.1** 에러 메시지는 적용 완료. **2.2, 2.3**은 여유 있을 때 단계적으로 적용하면 됩니다.

---

## 4. 그밖에 보완 가능 (선택)

| 항목 | 설명 |
|------|------|
| **알림 탭 시 화면** | FCM 알림 탭 시 현재 `/home`만 이동 → 보호자면 대시보드로 바로 이동하면 UX 개선 |
| **미회신 알림 보내기** | no_response_screen "알림 보내기" → 대상자에게 FCM "기분 알려주기" 전송 (준비 중 문구 유지해도 무방) |
| **Firebase 초기화 실패** | 앱은 계속 실행되나 로그인/저장 불가 시 사용자에게 한 줄 안내 (현재는 로그만) |
| **문서** | `배포-전후-보완-제안.md` 등에 "에러 메시지 완료" 반영해 두면 이후 참고하기 좋음 |
