# 다른 기기에서 같은 번호로 로그인 시 동작

## 시나리오
- **Pixel 6**: 이미 `010-1111-2222`로 로그인된 상태
- **Pixel 7**: 같은 번호 `010-1111-2222`로 로그인 시도

## 실제 동작

### 1단계: Pixel 7에서 로그인 시도
```
[Pixel 7에서 앱 실행]
    ↓
전화번호 입력: "010-1111-2222"
    ↓
"인증 코드 전송" 버튼 클릭
```

### 2단계: 경고 다이얼로그 확인
```
SharedPreferences 확인:
  - Pixel 7의 SharedPreferences에 저장된 번호 확인
  - Pixel 7에는 이전에 로그인한 번호가 없음 (첫 로그인)
  - 경고 다이얼로그 표시 안 됨 ✅
```

**이유**: `SharedPreferences`는 **기기별로 저장**되기 때문입니다.
- Pixel 6에 저장된 정보는 Pixel 7에서 읽을 수 없습니다.
- 각 기기는 독립적인 저장 공간을 가집니다.

### 3단계: Firebase 처리
```
Firebase 서버:
  - 전화번호 받음: "+821011112222"
  - SMS 발송 요청: "이 번호로 인증 코드 보내줘"
```

### 4단계: 통신사 처리
```
통신사 (SK/LG/KT):
  - "+821011112222" 번호 찾기
  - "이 번호는 현재 Pixel 6이 사용 중" (또는 번호가 이전된 기기)
  - 실제 그 번호를 사용하는 기기로 SMS 전달
```

### 5단계: SMS 수신 및 인증
```
[실제 010-1111-2222 번호를 사용하는 기기]
    ↓
SMS 수신: "Your verification code is 111111"
    ↓
Pixel 7에서 코드 입력: "111111"
    ↓
로그인 완료 ✅
```

### 6단계: 로그인 결과
```
Firebase Authentication:
  - 같은 전화번호 = 같은 UID (같은 계정)
  - Pixel 7에서도 Pixel 6과 같은 계정으로 로그인됨 ✅
  
SharedPreferences:
  - Pixel 7의 SharedPreferences에 "010-1111-2222" 저장됨
  - 다음에 Pixel 7에서 다른 번호 입력 시 경고 표시됨
```

## 핵심 정리

### ✅ 정상 동작
1. **경고 다이얼로그 없음**: Pixel 7에는 이전 로그인 기록이 없으므로
2. **같은 계정으로 로그인**: Firebase는 전화번호로 계정을 구분하므로
3. **기기별 저장**: 각 기기의 SharedPreferences는 독립적

### 동작 흐름
```
Pixel 6: 010-1111-2222 로그인
    ↓
Pixel 6의 SharedPreferences에 "010-1111-2222" 저장
    ↓
Pixel 7: 010-1111-2222 로그인 시도
    ↓
Pixel 7의 SharedPreferences 확인 → 이전 번호 없음
    ↓
경고 없이 SMS 발송
    ↓
같은 계정으로 로그인 완료 ✅
    ↓
Pixel 7의 SharedPreferences에 "010-1111-2222" 저장
```

## 추가 시나리오

### 시나리오 A: Pixel 7에서 다른 번호 입력
```
Pixel 7에서 "010-3333-4444" 입력
    ↓
Pixel 7의 SharedPreferences 확인
    ↓
이전 번호: "010-1111-2222"
입력한 번호: "010-3333-4444"
    ↓
경고 다이얼로그 표시 ✅
    ↓
사용자 확인 후 SMS 발송
```

### 시나리오 B: Pixel 6에서 다른 번호 입력
```
Pixel 6에서 "010-3333-4444" 입력
    ↓
Pixel 6의 SharedPreferences 확인
    ↓
이전 번호: "010-1111-2222"
입력한 번호: "010-3333-4444"
    ↓
경고 다이얼로그 표시 ✅
    ↓
사용자 확인 후 SMS 발송
```

## 결론

### ✅ 정상 동작
- **다른 기기에서 같은 번호로 로그인**: 경고 없이 정상 로그인
- **같은 계정으로 로그인됨**: Firebase는 전화번호로 계정 구분
- **기기별 독립 저장**: 각 기기의 SharedPreferences는 독립적

### 경고 다이얼로그가 표시되는 경우
- ✅ **같은 기기**에서 **다른 번호** 입력 시
- ❌ **다른 기기**에서 **같은 번호** 입력 시 (표시 안 됨)

**이것이 정상 동작입니다!**
