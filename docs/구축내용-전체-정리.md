# HowAreYou (지금 어때) - 전체 구축내용 정리

> ChatGPT 등에 의견/피드백 받기 위한 서비스 구축 내용 요약

---

## 1. 서비스 개요

**서비스명**: 여기 어때? (지금 어때)  
**핵심 가치**: 소중한 사람과 안부를 나누는 앱  
**타겟**: 혼자 사는 부모님이 있거나, 본인이 혼자 사는데 연락할 보호자가 필요한 사용자

### 한 줄 소개
> 매일 전화하지 않아도, 안부는 전해집니다. 작은 기록 하나로 서로의 안심을 확인하세요.

---

## 2. 프로젝트 구조

| 폴더 | 기술 스택 | 역할 |
|------|----------|------|
| `homepage/` | Next.js 15, React 19, TypeScript, Tailwind | 랜딩 페이지 + 관리자 웹 |
| `lib/` | Flutter, Dart | 모바일 앱 (Android/iOS) |
| `functions/` | Node.js, Firebase Cloud Functions | 백엔드 로직 |
| `scripts/` | Node.js | 배포·동기화 스크립트 |

---

## 3. 홈페이지 (Next.js)

### 3.1 랜딩 페이지 섹션

| 섹션 | 내용 |
|------|------|
| **HeroSection** | 로고, 서비스명, 한 줄 소개, 베타 1기 참여 CTA (선착순 100명·1년 무료) |
| **ProblemSection** | "이런 분들께 필요합니다" - 혼자 사는 부모님/본인, 타지 가족·지인 안부 |
| **ServiceSection** | "이렇게 안부를 전합니다" - ① 버튼 한 번 기록 ② 필요 시점만 알림 ③ 3일 무응답 시 보호자 알림 |
| **PricingSection** | 연 12,000원(한달 1,000원), 1개월 무료 체험, 보호자만 결제 |
| **RecommendSection** | 부모님과 떨어진 분, 매일 전화 어렵지만 안부 확인 원하는 분, 조용히 안심 확인 원하는 가족 |
| **TrustSection** | "우리가 하지 않는 것" - 위치 추적 없음, 감시 없음, 평가/점수화 없음 |
| **FaqSection** | 결제 주체, 무료 체험, 해지, 위치 추적, 알림 방식, 보호자 열람 범위, 탈퇴·과금 등 |
| **AnnouncementsSection** | 공지사항 (제목만 표시, 클릭 시 내용 펼침, 최대 5개 + 더 보기) |
| **CtaSection** | 베타 1기 참여 CTA (선착순 100명·출시 최우선 안내·1년 무료) |
| **Footer** | 1:1 문의, 이용약관, 개인정보처리방침 링크 |
| **ScrollToTopButton** | 스크롤 400px 이상 시 상단 이동 버튼 표시 |

### 3.2 공개 페이지

- `/` - 메인 랜딩
- `/privacy` - 개인정보처리방침
- `/terms` - 이용약관
- `/inquiry` - 1:1 문의 (등록·확인·삭제, 관리자 답변 확인)

### 3.3 OG / 링크 미리보기

- 제목: "여기 어때?"
- 설명: "소중한 사람과 안부를 나누는 앱"
- 이미지: 1200×630 OG 이미지 (로고 70% 크기)

### 3.4 베타 참여 모달

- 휴대폰 번호만 수집 (문자 전용)
- 안내: "출시 시 설치 링크를 문자로 보내드립니다."
- 개인정보: "입력하신 번호는 베타 1기 안내 외 다른 용도로 사용되지 않습니다."
- 하이픈 없이 번호만 입력

---

## 4. 관리자 웹 (`/admin`)

### 4.1 인증

- 로그인: 아이디/비밀번호 (ADMIN_USERNAME, ADMIN_PASSWORD)
- 세션 쿠키 기반
- 모든 관리자 페이지 접근 시 인증 확인

### 4.2 대시보드

- 통계: 회원 수, 미답변 문의 수, 공지 수, 베타 대기 수, **서비스 개선 피드백 수**
- 빠른 링크: 회원관리, 1:1 문의, **서비스 개선**, 공지사항, 베타 1기 대기

### 4.3 회원관리

- 전화번호, 가입일시, 역할(보호대상자/보호자/둘 다), 연결된 보호자/보호대상자 전화번호
- 번호 컬럼 (최신순=가장 큰 번호)
- 검색, 역할 필터, 정렬, 새로고침

### 4.4 베타 1기 대기

- 휴대폰 번호만 표시 (cohort 필드로 1기/2기 구분, 추후 2기 운영 시 필터 가능)
- 번호 컬럼 (최신순), 검색, 선택 삭제, 휴대폰 번호 복사
- 연락처 클릭 시 수정 가능
- 번호 (최신순=가장 큰 번호)

### 4.5 공지사항

- 등록/수정/삭제, 상단 고정
- 정렬: 등록일/수정일
- 목록: 제목만 표시, 클릭 시 내용 펼침

### 4.6 1:1 문의

- 목록 조회, 상태 필터 (미답변/답변완료), 기간 필터
- 답변 등록, 문의 삭제

### 4.7 서비스 개선 피드백

- **접근**: 홈페이지 → `/admin` 로그인 → 상단 메뉴 **서비스 개선** (또는 대시보드 카드)
- **URL**: `https://how-are-you-nu.vercel.app/admin/service-feedback`
- 목록: 앱에서 제출한 만족도, 불편했던 점, 개선 아이디어, 계속 사용 의향
- 기간 필터: 전체 / 최근 7일 / 최근 30일
- 사용자 정보: 전화번호, 표시명, userId
- 새 피드백이 있으면 상단 메뉴에 파란 배지로 개수 표시

---

## 5. 모바일 앱 (Flutter)

### 5.1 인증

- 전화번호 OTP (Firebase Auth)
- 약관 동의
- 최초 가입 시 환영 다이얼로그

### 5.2 역할

- **보호대상자**: 안부 기록, 보호자 관리, 내 상태 보기
- **보호자**: 보호대상자 목록, 대시보드, 연속 기록·7일 이력 확인

### 5.3 보호대상자 기능

- 오늘 상태 기록 (5가지 이모지 + 메모)
- 보호자 목록, 보호자 추가(전화번호/초대 링크)
- 7일 이력 차트, 연속 기록(스트릭)
- 설정, 공지사항, 1:1 문의
- 당일 미기록 시 19:00 리마인드 알림

### 5.4 보호자 기능

- 보호대상자별 오늘 기록 여부, 7일 이력, 연속 기록
- 보호대상자 추가/제거
- 기록 시 실시간 알림, 3일 연속 무응답 시 알림
- 구독 관리, 공지사항, 1:1 문의

### 5.5 구독

- 1개월 무료 체험
- 연 12,000원 (보호자만 결제)
- 스토어(구글·앱스토어)에서 구독/해지

---

## 6. API 및 백엔드

### 6.1 홈페이지 API (Next.js)

| 경로 | 메서드 | 설명 |
|------|--------|------|
| `/api/waitlist` | POST | 베타 대기 등록 (휴대폰) |
| `/api/inquiry` | POST | 문의 등록 |
| `/api/inquiry/check` | GET | 문의 확인 |
| `/api/inquiry/delete` | POST | 문의 삭제 |
| `/api/admin/login` | POST | 관리자 로그인 |
| `/api/admin/logout` | POST | 로그아웃 |
| `/api/admin/auth` | GET | 세션 확인 |
| `/api/admin/stats` | GET | 통계 |
| `/api/admin/users` | GET | 회원 목록 |
| `/api/admin/waitlist` | GET | 베타 대기 목록 |
| `/api/admin/waitlist/[id]` | PATCH, DELETE | 대기 수정/삭제 |
| `/api/admin/announcements` | GET, POST | 공지 조회/등록 |
| `/api/admin/announcements/[id]` | PATCH, DELETE | 공지 수정/삭제 |
| `/api/admin/inquiries` | GET | 문의 목록 |
| `/api/admin/inquiries/[id]` | DELETE | 문의 삭제 |
| `/api/admin/inquiries/[id]/reply` | POST | 답변 등록 |
| `/api/admin/service-feedback` | GET | 서비스 개선 피드백 목록 (관리자 전용) |

### 6.2 Firebase Cloud Functions

| 함수 | 설명 |
|------|------|
| `processPendingInvitesOnSignup` | 신규 가입 시 대기 초대 자동 연결 |
| `onResponseCreated` | 기록 시 보호자에게 알림 발송 |
| `onResponseUpdated` | 기록 수정 시 보호자 알림 |
| `sendSubjectReminder` | 매일 19:00 보호대상자 리마인드 |
| `sendThreeDayNoResponseAlert` | 매일 20:05, 3일 무응답 시 보호자 알림 |
| `removeGuardianFromSubject` | 보호자 제거(Callable) |
| `addToWaitlist` | 베타 대기 등록(선착순 100명, Callable) |

---

## 7. Firestore 구조

| 컬렉션 | 용도 |
|--------|------|
| `users` | 사용자(전화번호, FCM 토큰, 구독 상태) |
| `subjects` | 보호대상자(연결 보호자, 연속 기록, 마지막 기록일 등) |
| `subjects/{id}/prompts` | 공개 응답(날짜별) |
| `subjects/{id}/private_prompts` | 비공개 응답(기분, 메모) |
| `pending_guardian_invites` | 보호자→대상자 대기 초대 |
| `pending_subject_invites` | 대상자→보호자 대기 초대 |
| `waitlist` | 베타 대기 |
| `announcements` | 공지사항 |
| `inquiries` | 1:1 문의 |
| `service_feedback` | 서비스 개선 피드백 (앱 설정에서 제출) |
| `notification_requests` | 알림 요청(Cloud Functions용) |

---

## 8. 알림 체계

| 종류 | 발송 시점 | 대상 |
|------|----------|------|
| 기록 시 알림 | 보호대상자가 기록했을 때 | 보호자 |
| 3일 무응답 알림 | 72시간 이상 기록 없을 때 | 보호자 |
| 리마인드 알림 | 매일 19:00, 당일 미기록 시 | 보호대상자 |

---

## 9. 기술 스택

| 영역 | 기술 |
|------|------|
| 웹 | Next.js 15, React 19, TypeScript, Tailwind CSS |
| 모바일 | Flutter, Dart |
| 백엔드 | Firebase Cloud Functions (Node.js) |
| DB | Cloud Firestore |
| 인증 | Firebase Auth (전화번호 OTP) |
| 알림 | FCM, flutter_local_notifications |
| 배포 | Vercel(홈페이지), Firebase Hosting |
| 결제 | 앱스토어/구글 플레이 인앱결제(준비 중) |

---

## 10. 주요 비즈니스 규칙

- **결제**: 보호자만 연 12,000원 결제, 보호대상자 무료
- **무료 체험**: 1개월
- **베타 1기**: 선착순 100명, 1년 무료 (추후 2기 운영 시 lib/config/beta.ts cohort 변경)
- **보호자 열람**: "오늘 기록 여부"만, 상세 내용·위치·건강정보 미제공
- **위치 추적**: 없음
- **의료·응급**: 해당 없음 (안부 확인 전용)

---

## 11. 제외된 기능 (구현 예정 없음)

| 항목 | 설명 |
|------|------|
| **알림 보내기 (보호자→보호대상자)** | 보호자가 미회신 화면에서 대상자에게 "기분 알려주기" 유도 FCM 전송 |
| **차트 상단 기분 기반 요약** | "최근 7일 중 5일은 '괜찮아' 상태였습니다" 같은 기분별 요약 문장 (현재는 "최근 N일 중 X일 기록했어요"만 표시) |

---

*본 문서는 ChatGPT 등 외부 도구에 의견/피드백 요청 시 참고용으로 작성되었습니다.*
